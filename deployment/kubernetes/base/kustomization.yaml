# =============================================================================
# Kustomize Base Configuration
# =============================================================================
# Base Kubernetes manifests for the Enterprise Knowledge Agent
#
# This base is referenced by overlay environments:
#   - development
#   - staging  
#   - production
#
# Usage:
#   # Preview base manifests
#   kubectl kustomize deployment/kubernetes/base
#
#   # Apply with overlay
#   kubectl apply -k deployment/kubernetes/overlays/staging
# =============================================================================

apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Namespace for all resources
namespace: knowledge-agent

# Common labels applied to all resources
commonLabels:
  app.kubernetes.io/name: knowledge-agent
  app.kubernetes.io/part-of: enterprise-knowledge-platform
  app.kubernetes.io/managed-by: kustomize

# Common annotations
commonAnnotations:
  app.kubernetes.io/description: "AI-powered enterprise knowledge management system"

# Resources to include (order matters for dependencies)
resources:
  # Namespace must come first
  - namespace.yaml
  # Storage resources
  - pvc.yaml
  # Configuration
  - configmap.yaml
  - secrets.yaml
  # Infrastructure services (Qdrant, Redis, PostgreSQL)
  - infrastructure.yaml
  # Application
  - deployment.yaml
  - service.yaml
  # Networking
  - ingress.yaml
  # Autoscaling
  - hpa.yaml

# ConfigMap generator (optional - for dynamic config)
# configMapGenerator:
#   - name: knowledge-agent-config
#     behavior: merge
#     literals:
#       - APP_NAME=knowledge-agent

# Images configuration (can be overridden by overlays)
images:
  - name: ghcr.io/yourusername/knowledge-agent
    newTag: latest